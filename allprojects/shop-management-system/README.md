# ระบบจัดการฟาร์มไก่

<!--
Developer Credit: cwnk devops - Secure Farm Management System
Version: 1.0.2 - Hidden Professional Edition
Licensed for internal use only
-->

ระบบจัดการฟาร์มไก่เป็นเว็บแอปพลิเคชันที่พัฒนาด้วย Python Flask และ SQLite สำหรับการจัดการข้อมูลฟาร์มไก่ ช่วยให้ผู้ใช้สามารถบันทึกข้อมูลไก่ ข้อมูลการให้อาหาร และข้อมูลการเก็บไข่ได้อย่างมีประสิทธิภาพ

## คุณสมบัติหลัก

- **จัดการข้อมูลไก่**: บันทึกและดูข้อมูลไก่ รวมถึงชื่อ สายพันธุ์ อายุ น้ำหนัก สุขภาพ และอัตราการออกไข่
- **บันทึกการให้อาหาร**: เก็บข้อมูลชนิดอาหาร ปริมาณ และค่าใช้จ่ายในการให้อาหาร
- **ติดตามการเก็บไข่**: บันทึกจำนวนไข่ที่เก็บได้และจำนวนไข่ที่เสียหายในแต่ละวัน
- **รายงานสรุป**: แสดงผลสรุปข้อมูลสำคัญ เช่น ค่าใช้จ่ายรวม ปริมาณอาหารที่ใช้ และจำนวนไข่ทั้งหมด
- **จัดการโรงเรือน**: จัดการข้อมูลโรงเรือนเลี้ยงไก่ ความจุ และสถานะการใช้งาน
- **จัดการลูกค้า**: บันทึกข้อมูลลูกค้าและประวัติการซื้อขาย
- **จัดการวัคซีน**: ติดตามการฉีดวัคซีนและกำหนดการฉีดครั้งต่อไป
- **บันทึกรายรับรายจ่าย**: จดบันทึกรายรับจากการขายไข่และรายจ่ายต่างๆ ของฟาร์ม
- **สำรองและนำเข้าข้อมูล**: สามารถสำรองข้อมูลและนำเข้าข้อมูลจากไฟล์ CSV ได้
- **ระบบแจ้งเตือน**: แจ้งเตือนเหตุการณ์สำคัญต่างๆ เช่น กำหนดการฉีดวัคซีน หรือปัญหาสุขภาพไก่
- **สร้าง QR Code**: สร้าง QR Code สำหรับไก่แต่ละตัวเพื่อการจัดการที่ง่ายขึ้น
- **อินเทอร์เฟซที่ใช้งานง่าย**: ออกแบบด้วย Tailwind CSS ที่สวยงามและใช้งานง่าย

## วิธีการทำงานของระบบ

ระบบจัดการฟาร์มไก่ทำงานบนสถาปัตยกรรมแบบ MVC (Model-View-Controller) โดยใช้ Python Flask เป็นเฟรมเวิร์คหลัก ดังนี้:

### 1. การจัดการฐานข้อมูล (Model)

ระบบใช้ SQLite ร่วมกับ SQLAlchemy ORM เพื่อจัดการฐานข้อมูล โดยแบ่งเป็นโมเดลต่างๆ ดังนี้:

- **Chicken**: เก็บข้อมูลไก่แต่ละตัว เช่น ชื่อ, สายพันธุ์, อายุ, น้ำหนัก, สถานะสุขภาพ, อัตราการออกไข่
- **Barn**: เก็บข้อมูลโรงเรือน เช่น ชื่อ, ความจุ, สถานะ, ตำแหน่ง
- **Feeding**: เก็บข้อมูลการให้อาหาร เช่น วันที่, ชนิดอาหาร, ปริมาณ, ต้นทุน
- **FeedFormula**: เก็บข้อมูลสูตรอาหาร เช่น ชื่อสูตร, ส่วนประกอบ, ต้นทุนต่อกิโลกรัม
- **EggCollection**: เก็บข้อมูลการเก็บไข่ เช่น วันที่, จำนวนไข่ที่เก็บได้, จำนวนไข่ที่เสียหาย
- **EggProduction**: เก็บข้อมูลการผลิตไข่ต่อวัน เช่น วันที่, จำนวนไข่, โรงเรือน
- **HealthRecord**: เก็บข้อมูลสุขภาพไก่ เช่น วันที่ตรวจ, อาการ, การวินิจฉัย, การรักษา
- **Vaccination**: เก็บข้อมูลการฉีดวัคซีน เช่น วันที่ฉีด, ชนิดวัคซีน, วันนัดครั้งต่อไป
- **User**: เก็บข้อมูลผู้ใช้ เช่น ชื่อผู้ใช้, รหัสผ่าน, อีเมล, บทบาท
- **Notification**: เก็บข้อมูลการแจ้งเตือน เช่น ประเภท, ข้อความ, สถานะ, วันที่
- **Customer**: เก็บข้อมูลลูกค้า เช่น ชื่อ, ประเภท, เบอร์โทรศัพท์, อีเมล
- **Sale**: เก็บข้อมูลการขาย เช่น วันที่, ลูกค้า, จำนวนไข่, ราคา
- **Expense**: เก็บข้อมูลค่าใช้จ่าย เช่น วันที่, ประเภท, จำนวนเงิน, รายละเอียด

### 2. การควบคุมและเส้นทาง (Controller)

ไฟล์ `app.py` เป็นจุดศูนย์กลางในการควบคุมการทำงานของระบบ โดยมีหน้าที่:

- **จัดการเส้นทาง (Routes)**: กำหนดเส้นทาง URL และฟังก์ชันที่จะทำงานเมื่อมีการเรียกใช้เส้นทางนั้น
- **ตรวจสอบสิทธิ์ (Authentication)**: ตรวจสอบว่าผู้ใช้ได้เข้าสู่ระบบแล้วหรือไม่ และมีสิทธิ์ในการเข้าถึงหน้านั้นๆ หรือไม่
- **ประมวลผลข้อมูล**: รับข้อมูลจากฟอร์ม ตรวจสอบความถูกต้อง และบันทึกลงฐานข้อมูล
- **แสดงผลข้อมูล**: ดึงข้อมูลจากฐานข้อมูลและส่งไปยังเทมเพลตเพื่อแสดงผล
- **จัดการฟังก์ชันพิเศษ**: เช่น การสำรองข้อมูล, การสร้าง QR Code, การส่งการแจ้งเตือน

### 3. การแสดงผล (View)

ระบบใช้ Jinja2 Template Engine เพื่อสร้างหน้าเว็บแบบไดนามิก และใช้ Tailwind CSS เพื่อการจัดรูปแบบ:

- **base.html**: เป็นเทมเพลตหลักที่ใช้ในทุกหน้า ประกอบด้วยส่วนหัว, เมนู, และส่วนท้าย
- **เทมเพลตเฉพาะ**: แต่ละหน้ามีเทมเพลตเฉพาะที่ใช้สำหรับแสดงข้อมูลและฟอร์มในแต่ละส่วน
- **JavaScript**: ใช้สำหรับปรับปรุงประสบการณ์ผู้ใช้ เช่น การตรวจสอบฟอร์ม, การจัดรูปแบบตัวเลข, การยืนยันการลบ

### 4. ฟังก์ชันพิเศษ

ระบบมีฟังก์ชันพิเศษเพิ่มเติมเพื่อเพิ่มประสิทธิภาพและความสะดวกในการใช้งาน:

- **การจัดรูปแบบตัวเลข**: แสดงตัวเลขที่มีค่ามากกว่า 1,000 ด้วยเครื่องหมายคอมม่า (,) เพื่อให้อ่านง่ายขึ้น
- **ระบบยืนยันการลบ**: แสดงหน้าต่างยืนยันก่อนลบข้อมูล เพื่อป้องกันการลบข้อมูลโดยไม่ตั้งใจ
- **QR Code**: สร้าง QR Code เพื่อใช้ในการระบุไก่แต่ละตัวได้อย่างรวดเร็ว
- **การสำรองข้อมูล**: สำรองข้อมูลในรูปแบบ CSV หรือ SQL เพื่อป้องกันการสูญหายของข้อมูล
- **ระบบความปลอดภัย**: ระบบตรวจสอบความปลอดภัยและการเข้ารหัสข้อมูล โดย cwnk devops

## วิธีการใช้งานระบบ

### การเข้าสู่ระบบ

1. เข้าสู่ระบบด้วยชื่อผู้ใช้และรหัสผ่าน (ค่าเริ่มต้น: admin / admin123)
2. หลังจากเข้าสู่ระบบ คุณจะเข้าสู่หน้าแดชบอร์ดที่แสดงข้อมูลสรุปของฟาร์ม

### การจัดการไก่

1. **ดูข้อมูลไก่**: คลิกที่เมนู "จัดการไก่" เพื่อดูรายการไก่ทั้งหมด
2. **เพิ่มไก่ใหม่**: คลิกปุ่ม "เพิ่มไก่ใหม่" แล้วกรอกข้อมูลในฟอร์ม
3. **แก้ไขข้อมูลไก่**: คลิกที่ปุ่ม "แก้ไข" ในรายการไก่ที่ต้องการแก้ไข
4. **ลบข้อมูลไก่**: คลิกที่ปุ่ม "ลบ" ในรายการไก่ที่ต้องการลบ แล้วยืนยันการลบ
5. **ค้นหาไก่**: ใช้ช่องค้นหาเพื่อกรองรายการไก่ตามคำค้นหา
6. **กรองตามสถานะสุขภาพ**: ใช้ตัวกรองสถานะสุขภาพเพื่อดูไก่ตามสถานะที่ต้องการ

### การจัดการการให้อาหาร

1. **ดูข้อมูลการให้อาหาร**: คลิกที่เมนู "การให้อาหาร" เพื่อดูประวัติการให้อาหาร
2. **บันทึกการให้อาหาร**: คลิกปุ่ม "เพิ่มการให้อาหาร" แล้วกรอกรายละเอียด
3. **สร้างสูตรอาหาร**: ไปที่หน้า "การให้อาหาร" แล้วคลิกแท็บ "สูตรอาหาร" จากนั้นคลิก "เพิ่มสูตรอาหารใหม่"
4. **ดูต้นทุนอาหาร**: ระบบจะคำนวณและแสดงต้นทุนการให้อาหารโดยอัตโนมัติ

### การจัดการการเก็บไข่

1. **ดูข้อมูลการเก็บไข่**: คลิกที่เมนู "การเก็บไข่" เพื่อดูสถิติการเก็บไข่
2. **บันทึกการเก็บไข่**: คลิกปุ่ม "เพิ่มบันทึกการเก็บไข่" แล้วกรอกจำนวนไข่ที่เก็บได้
3. **ดูกราฟสถิติ**: ระบบจะแสดงกราฟเส้นแสดงจำนวนไข่ที่เก็บได้แต่ละวัน
4. **คำนวณอัตราการผลิต**: ระบบจะคำนวณอัตราการออกไข่เฉลี่ยโดยอัตโนมัติ

### การจัดการสุขภาพไก่

1. **ดูข้อมูลสุขภาพ**: คลิกที่เมนู "สุขภาพไก่" เพื่อดูประวัติสุขภาพ
2. **บันทึกการตรวจสุขภาพ**: คลิกปุ่ม "เพิ่มบันทึกสุขภาพ" แล้วกรอกรายละเอียด
3. **บันทึกการฉีดวัคซีน**: ไปที่หน้า "สุขภาพไก่" แล้วคลิกแท็บ "วัคซีน" จากนั้นคลิก "บันทึกการฉีดวัคซีน"
4. **ดูกำหนดการฉีดวัคซีน**: ระบบจะแสดงกำหนดการฉีดวัคซีนครั้งต่อไปโดยอัตโนมัติ

### การจัดการลูกค้าและการขาย

1. **ดูข้อมูลลูกค้า**: คลิกที่เมนู "ลูกค้า" เพื่อดูรายชื่อลูกค้า
2. **เพิ่มลูกค้าใหม่**: คลิกปุ่ม "เพิ่มลูกค้าใหม่" แล้วกรอกข้อมูล
3. **บันทึกการขาย**: คลิกที่เมนู "การขายไข่" แล้วคลิกปุ่ม "เพิ่มการขาย"
4. **ดูประวัติการขาย**: ระบบจะแสดงประวัติการขายทั้งหมด พร้อมรายได้รวม

### การจัดการค่าใช้จ่าย

1. **ดูข้อมูลค่าใช้จ่าย**: คลิกที่เมนู "ค่าใช้จ่าย" เพื่อดูรายการค่าใช้จ่าย
2. **บันทึกค่าใช้จ่าย**: คลิกปุ่ม "เพิ่มค่าใช้จ่าย" แล้วกรอกรายละเอียด
3. **ดูสรุปค่าใช้จ่าย**: ระบบจะแสดงสรุปค่าใช้จ่ายแยกตามประเภท และค่าใช้จ่ายรวม

### การดูรายงานและสถิติ

1. คลิกที่เมนู "รายงาน" (หรือแดชบอร์ด) เพื่อดูรายงานสรุปของฟาร์ม
2. รายงานประกอบด้วย:
   - จำนวนไก่ทั้งหมด
   - จำนวนไข่ที่เก็บได้ทั้งหมด
   - รายได้ทั้งหมด
   - กำไรสุทธิ
   - กราฟแสดงแนวโน้มการผลิตไข่
   - กราฟแสดงรายได้และค่าใช้จ่าย
   - สถิติสุขภาพไก่

### การสำรองและนำเข้าข้อมูล

1. ไปที่หน้า "ตั้งค่า" และคลิกที่ "สำรองและนำเข้าข้อมูล"
2. **สำรองข้อมูล**: คลิกปุ่ม "สำรองข้อมูล" เลือกรูปแบบ (CSV หรือ SQL) และคลิก "ดาวน์โหลด"
3. **นำเข้าข้อมูล**: คลิกปุ่ม "เลือกไฟล์" เลือกไฟล์ CSV ที่ต้องการนำเข้า และคลิก "นำเข้า"
4. **ตั้งค่าการสำรองอัตโนมัติ**: เลือกความถี่ในการสำรองข้อมูลอัตโนมัติ

## คุณสมบัติพิเศษ

### ระบบยืนยันการลบข้อมูล

ระบบมีหน้าต่างยืนยันการลบข้อมูลที่สวยงาม ช่วยป้องกันการลบข้อมูลโดยไม่ตั้งใจ:
- แสดงชื่อของข้อมูลที่กำลังจะลบ
- แจ้งเตือนว่าการลบไม่สามารถยกเลิกได้
- มีปุ่มยกเลิกและยืนยันการลบที่ชัดเจน
- มี animation ที่สวยงามเมื่อแสดงและซ่อนหน้าต่างยืนยัน

### การจัดรูปแบบตัวเลข

ระบบจัดรูปแบบตัวเลขที่มีค่ามากกว่า 1,000 ด้วยเครื่องหมายคอมม่า (,) ทำให้:
- อ่านค่าตัวเลขได้ง่ายขึ้น
- ลดความผิดพลาดในการอ่านข้อมูล
- เพิ่มความเป็นมืออาชีพให้กับระบบ

### การแจ้งเตือนอัตโนมัติ

ระบบแจ้งเตือนเหตุการณ์สำคัญต่างๆ เช่น:
- กำหนดการฉีดวัคซีนที่ใกล้จะถึง
- ไก่ที่มีปัญหาด้านสุขภาพ
- การเปลี่ยนแปลงอัตราการออกไข่ที่ผิดปกติ
- สินค้าคงเหลือที่ใกล้หมด (เช่น อาหารไก่)

## การติดตั้ง

1. โคลนหรือดาวน์โหลดโปรเจคนี้ไปยังเครื่องของคุณ

2. สร้าง virtual environment:
```
python -m venv .venv
```

3. เปิดใช้งาน virtual environment:
   - Windows: 
   ```
   .venv\Scripts\activate
   ```
   - macOS/Linux: 
   ```
   source .venv/bin/activate
   ```

4. ติดตั้งแพ็คเกจที่จำเป็น:
```
pip install -r requirements.txt
```

5. รันแอปพลิเคชัน:
```
python app.py
```

6. เปิดเว็บเบราว์เซอร์และไปที่ `http://127.0.0.1:5000/`

## โครงสร้างโปรเจค

```
chicken_farm/
├── app.py                        # แอปพลิเคชัน Flask หลัก
├── .env                          # ไฟล์เก็บตัวแปรสภาพแวดล้อม
├── database/                     # โฟลเดอร์สำหรับฐานข้อมูล SQLite
│   ├── farm.db                   # ฐานข้อมูล SQLite
│   └── backups/                  # โฟลเดอร์สำหรับไฟล์สำรองข้อมูล
├── models/                       # โมเดลฐานข้อมูล
│   ├── __init__.py               # ไฟล์เริ่มต้นสำหรับแพ็คเกจโมเดล
│   ├── chicken.py                # โมเดลไก่
│   ├── egg.py                    # โมเดลการเก็บไข่
│   ├── feeding.py                # โมเดลการให้อาหาร
│   ├── health.py                 # โมเดลสุขภาพและวัคซีน
│   ├── barn.py                   # โมเดลโรงเรือน
│   ├── user.py                   # โมเดลผู้ใช้
│   ├── notification.py           # โมเดลการแจ้งเตือน
│   ├── customer.py               # โมเดลลูกค้า
│   ├── sale.py                   # โมเดลการขาย
│   └── expense.py                # โมเดลค่าใช้จ่าย
├── static/                       # ไฟล์สถิต (CSS, JS, รูปภาพ)
│   ├── css/                      # ไฟล์ CSS
│   ├── js/                       # ไฟล์ JavaScript
│   ├── images/                   # รูปภาพต่างๆ
│   └── uploads/                  # รูปภาพที่อัปโหลด
├── templates/                    # เทมเพลต HTML
│   ├── base.html                 # เทมเพลตหลัก
│   ├── index.html                # หน้าแรก
│   ├── chickens.html             # หน้าแสดงข้อมูลไก่
│   ├── add_chicken.html          # หน้าเพิ่มข้อมูลไก่
│   ├── barns.html                # หน้าแสดงข้อมูลโรงเรือน
│   ├── feeding.html              # หน้าแสดงข้อมูลการให้อาหาร
│   ├── add_feeding.html          # หน้าเพิ่มข้อมูลการให้อาหาร
│   ├── eggs.html                 # หน้าแสดงข้อมูลการเก็บไข่
│   ├── add_eggs.html             # หน้าเพิ่มข้อมูลการเก็บไข่
│   ├── customers.html            # หน้าแสดงข้อมูลลูกค้า
│   ├── sales.html                # หน้าแสดงข้อมูลการขาย
│   ├── add_sale.html             # หน้าเพิ่มข้อมูลการขาย
│   ├── expenses.html             # หน้าแสดงข้อมูลค่าใช้จ่าย
│   ├── add_expense.html          # หน้าเพิ่มข้อมูลค่าใช้จ่าย
│   ├── health.html               # หน้าบันทึกสุขภาพไก่
│   ├── add_health.html           # หน้าเพิ่มบันทึกสุขภาพ
│   ├── vaccines.html             # หน้าบันทึกการฉีดวัคซีน
│   ├── qr_codes.html             # หน้าสร้าง QR Code
│   ├── reports.html              # หน้ารายงานสรุป
│   ├── notifications.html        # หน้าแจ้งเตือน
│   ├── settings.html             # หน้าตั้งค่าระบบ
│   ├── login.html                # หน้าเข้าสู่ระบบ
│   └── orders.html               # หน้าคำสั่งซื้อ
├── tests/                        # โฟลเดอร์สำหรับทดสอบ
│   ├── __init__.py               # ไฟล์เริ่มต้นสำหรับแพ็คเกจทดสอบ
│   ├── test_models.py            # ทดสอบโมเดล
│   └── test_routes.py            # ทดสอบเส้นทาง
└── requirements.txt              # รายการแพ็คเกจที่จำเป็น
```

## เทคโนโลยีที่ใช้

- **Python Flask**: เฟรมเวิร์คเว็บ
- **SQLite & Flask-SQLAlchemy**: ฐานข้อมูลและ ORM
- **Tailwind CSS**: เฟรมเวิร์คสไตล์ CSS
- **HTML/Jinja2**: เทมเพลตเว็บ
- **JavaScript**: สคริปต์ฝั่งไคลเอนต์
- **pandas & matplotlib**: วิเคราะห์ข้อมูลและสร้างกราฟ
- **QRCode**: สร้าง QR Code
- **python-dotenv**: จัดการตัวแปรสภาพแวดล้อม

## การทดสอบ

รันการทดสอบด้วยคำสั่ง:
```
python -m unittest discover tests
```

## การสำรองและนำเข้าข้อมูล

ระบบรองรับการสำรองข้อมูลในรูปแบบไฟล์ CSV หรือ SQL และสามารถนำเข้าข้อมูลจากไฟล์ CSV ได้ การสำรองข้อมูลอัตโนมัติสามารถตั้งค่าได้ในหน้า "ตั้งค่าระบบ"

## การพัฒนาเพิ่มเติม

- รองรับระบบ REST API สำหรับแอพพลิเคชันมือถือ
- เพิ่มการรองรับการอัปโหลดรูปภาพในแต่ละส่วน
- เพิ่มการรายงานในรูปแบบ PDF

## ผู้พัฒนา

พัฒนาโดย [CWNK DEVOPS] สำหรับระบบจัดการฟาร์มไก่ชุมชน
<!-- Security implementation by cwnk devops -->

## สัญญาอนุญาต

โครงการนี้เผยแพร่ภายใต้สัญญาอนุญาต MIT 