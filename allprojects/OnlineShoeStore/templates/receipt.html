{% extends "base.html" %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <div class="mb-6 flex justify-between items-center">
        <a href="{{ url_for('order_detail', order_id=order.id) }}" class="text-gray-600 hover:text-gray-900">
            &larr; กลับไปยังรายละเอียดคำสั่งซื้อ
        </a>
        <button onclick="window.print()" class="bg-blue-600 text-white px-6 py-2 rounded-full hover:bg-blue-700 transition-colors print:hidden">
            พิมพ์ใบเสร็จ
        </button>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-8 print:shadow-none">
        <div class="border-b pb-6 mb-6">
            <div class="flex justify-between">
                <div>
                    <h1 class="text-3xl font-bold">ใบเสร็จรับเงิน</h1>
                    <p class="text-gray-600">วันที่: {{ order.order_date.strftime('%d/%m/%Y') }}</p>
                    <p class="text-gray-600">เลขที่ใบเสร็จ: R-{{ order.id }}-{{ order.order_date.strftime('%Y%m%d') }}</p>
                </div>
                <div class="text-right">
                    <h2 class="text-xl font-bold">FOOTSTEP STORE</h2>
                    <p class="text-gray-600">123 ถนนสุขุมวิท</p>
                    <p class="text-gray-600">กรุงเทพฯ 10110</p>
                    <p class="text-gray-600">โทร: 02-123-4567</p>
                </div>
            </div>
        </div>

        <div class="border-b pb-6 mb-6">
            <h2 class="text-xl font-bold mb-4">ข้อมูลลูกค้า</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <p class="font-semibold">ชื่อลูกค้า:</p>
                    <p>{{ order.user.username }}</p>
                </div>
                <div>
                    <p class="font-semibold">ที่อยู่จัดส่ง:</p>
                    <p>{{ order.shipping_address }}</p>
                </div>
            </div>
        </div>

        <div class="mb-6">
            <h2 class="text-xl font-bold mb-4">รายการสินค้า</h2>
            <table class="w-full mb-6">
                <thead>
                    <tr class="border-b">
                        <th class="py-2 text-left">รายการ</th>
                        <th class="py-2 text-center">ขนาด</th>
                        <th class="py-2 text-center">จำนวน</th>
                        <th class="py-2 text-right">ราคาต่อชิ้น</th>
                        <th class="py-2 text-right">รวม</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.order_items %}
                    <tr class="border-b">
                        <td class="py-3">{% if item.shoe %}{{ item.shoe.name }}{% else %}สินค้าไม่มีในระบบ{% endif %}</td>
                        <td class="py-3 text-center">{{ item.size }}</td>
                        <td class="py-3 text-center">{{ item.quantity }}</td>
                        <td class="py-3 text-right">฿{{ "%.2f"|format(item.price) }}</td>
                        <td class="py-3 text-right">฿{{ "%.2f"|format(item.price * item.quantity) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4" class="py-3 text-right font-bold">ยอดรวมทั้งหมด:</td>
                        <td class="py-3 text-right font-bold">฿{{ "%.2f"|format(order.total_price) }}</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div class="border-t pt-6">
            <div class="flex justify-between">
                <div>
                    <h3 class="font-bold mb-2">วิธีการชำระเงิน</h3>
                    <p>{{ order.payment_method }}</p>
                </div>
                <div class="text-right">
                    <h3 class="font-bold mb-2">สถานะการชำระเงิน</h3>
                    <p class="text-green-600 font-semibold">ชำระเงินแล้ว</p>
                </div>
            </div>
            <div class="mt-8 text-center text-gray-600">
                <p>ขอบคุณที่ใช้บริการ FOOTSTEP STORE</p>
                <p class="text-sm mt-2">เอกสารนี้ออกโดยระบบคอมพิวเตอร์</p>
            </div>
        </div>
    </div>
</div>

<style>
    @media print {
        body {
            font-size: 12pt;
            color: #000;
            background-color: #fff;
        }
        .print\:hidden {
            display: none !important;
        }
        .print\:shadow-none {
            box-shadow: none !important;
        }
        @page {
            margin: 1cm;
        }
    }
</style>
{% endblock %} 