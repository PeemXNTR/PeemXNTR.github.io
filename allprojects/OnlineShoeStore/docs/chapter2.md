# บทที่ 2
# การวิเคราะห์และออกแบบระบบ

## 2.1 การศึกษาและวิเคราะห์ระบบงานปัจจุบัน

ปัจจุบันร้านขายรองเท้าส่วนใหญ่ยังคงใช้ระบบการขายแบบดั้งเดิม โดยลูกค้าต้องเดินทางมาที่ร้านเพื่อเลือกซื้อรองเท้า ซึ่งมีข้อจำกัดหลายประการ ได้แก่

1. **ข้อจำกัดด้านเวลา**: ร้านค้ามีเวลาเปิด-ปิดที่จำกัด ทำให้ลูกค้าที่ไม่สะดวกในช่วงเวลาดังกล่าวไม่สามารถเข้ามาซื้อสินค้าได้
2. **ข้อจำกัดด้านสถานที่**: ลูกค้าที่อยู่ไกลจากร้านค้าอาจไม่สะดวกในการเดินทางมาซื้อสินค้า
3. **ข้อจำกัดด้านการจัดการสินค้า**: การจัดการสินค้าในร้านค้าแบบดั้งเดิมอาจทำได้ยาก เนื่องจากต้องจัดเก็บข้อมูลในรูปแบบเอกสาร
4. **ข้อจำกัดด้านการตลาด**: การประชาสัมพันธ์สินค้าในร้านค้าแบบดั้งเดิมอาจทำได้จำกัด

จากข้อจำกัดดังกล่าว จึงมีความจำเป็นในการพัฒนาระบบร้านขายรองเท้าออนไลน์ เพื่อแก้ไขปัญหาและข้อจำกัดของระบบการขายแบบดั้งเดิม

## 2.2 การวิเคราะห์ความต้องการของระบบ

จากการศึกษาและวิเคราะห์ระบบงานปัจจุบัน สามารถสรุปความต้องการของระบบร้านขายรองเท้าออนไลน์ได้ดังนี้

### 2.2.1 ความต้องการด้านฟังก์ชันการทำงาน (Functional Requirements)

1. **ระบบสมาชิก**
   - ผู้ใช้สามารถลงทะเบียนเป็นสมาชิกได้
   - ผู้ใช้สามารถเข้าสู่ระบบและออกจากระบบได้
   - ผู้ใช้สามารถแก้ไขข้อมูลส่วนตัวได้
   - ผู้ใช้สามารถดูประวัติการสั่งซื้อได้

2. **ระบบแสดงรายการสินค้า**
   - ระบบสามารถแสดงรายการสินค้าทั้งหมดได้
   - ระบบสามารถแสดงรายการสินค้าตามหมวดหมู่ได้
   - ระบบสามารถแสดงรายละเอียดของสินค้าได้

3. **ระบบค้นหาสินค้า**
   - ผู้ใช้สามารถค้นหาสินค้าตามชื่อได้
   - ผู้ใช้สามารถค้นหาสินค้าตามหมวดหมู่ได้
   - ผู้ใช้สามารถกรองสินค้าตามราคาได้

4. **ระบบตะกร้าสินค้า**
   - ผู้ใช้สามารถเพิ่มสินค้าลงในตะกร้าได้
   - ผู้ใช้สามารถแก้ไขจำนวนสินค้าในตะกร้าได้
   - ผู้ใช้สามารถลบสินค้าออกจากตะกร้าได้
   - ระบบสามารถคำนวณราคารวมของสินค้าในตะกร้าได้

5. **ระบบชำระเงิน**
   - ผู้ใช้สามารถเลือกวิธีการชำระเงินได้
   - ผู้ใช้สามารถกรอกข้อมูลการจัดส่งได้
   - ระบบสามารถสร้างใบเสร็จรับเงินได้

6. **ระบบจัดการคำสั่งซื้อ**
   - ผู้ใช้สามารถดูสถานะของคำสั่งซื้อได้
   - ผู้ใช้สามารถยกเลิกคำสั่งซื้อได้ (ในกรณีที่ยังไม่ได้จัดส่ง)

7. **ระบบรีวิวสินค้า**
   - ผู้ใช้สามารถให้คะแนนและรีวิวสินค้าได้
   - ผู้ใช้สามารถดูรีวิวของสินค้าได้

8. **ระบบจัดการสินค้าสำหรับผู้ดูแลระบบ**
   - ผู้ดูแลระบบสามารถเพิ่ม แก้ไข และลบสินค้าได้
   - ผู้ดูแลระบบสามารถจัดการหมวดหมู่สินค้าได้
   - ผู้ดูแลระบบสามารถจัดการสต็อกสินค้าได้

9. **ระบบจัดการคำสั่งซื้อสำหรับผู้ดูแลระบบ**
   - ผู้ดูแลระบบสามารถดูรายการคำสั่งซื้อทั้งหมดได้
   - ผู้ดูแลระบบสามารถอัปเดตสถานะของคำสั่งซื้อได้
   - ผู้ดูแลระบบสามารถดูรายงานยอดขายได้

### 2.2.2 ความต้องการที่ไม่ใช่ฟังก์ชันการทำงาน (Non-Functional Requirements)

1. **ความปลอดภัย (Security)**
   - ระบบต้องมีการเข้ารหัสข้อมูลที่สำคัญ เช่น รหัสผ่าน
   - ระบบต้องมีการตรวจสอบสิทธิ์การเข้าถึงข้อมูล

2. **ประสิทธิภาพ (Performance)**
   - ระบบต้องสามารถรองรับผู้ใช้งานพร้อมกันได้หลายคน
   - ระบบต้องมีความเร็วในการตอบสนองที่เหมาะสม

3. **ความเป็นมิตรกับผู้ใช้ (Usability)**
   - ระบบต้องมีส่วนติดต่อผู้ใช้ที่ใช้งานง่ายและเป็นมิตรกับผู้ใช้
   - ระบบต้องรองรับการใช้งานบนอุปกรณ์ที่หลากหลาย (Responsive Design)

4. **ความน่าเชื่อถือ (Reliability)**
   - ระบบต้องมีความเสถียรและพร้อมใช้งานตลอดเวลา
   - ระบบต้องมีการสำรองข้อมูลเพื่อป้องกันการสูญหายของข้อมูล

## 2.3 การออกแบบระบบ

### 2.3.1 การออกแบบสถาปัตยกรรมระบบ

ระบบร้านขายรองเท้าออนไลน์ใช้สถาปัตยกรรมแบบ Model-View-Controller (MVC) ซึ่งแบ่งการทำงานออกเป็น 3 ส่วนหลัก ได้แก่

1. **Model**: เป็นส่วนที่จัดการกับข้อมูลและฐานข้อมูล
2. **View**: เป็นส่วนที่แสดงผลข้อมูลให้กับผู้ใช้
3. **Controller**: เป็นส่วนที่ควบคุมการทำงานของระบบและเชื่อมต่อระหว่าง Model และ View

สถาปัตยกรรมนี้ช่วยให้การพัฒนาระบบเป็นไปอย่างมีระเบียบและง่ายต่อการบำรุงรักษา

### 2.3.2 การออกแบบฐานข้อมูล

ฐานข้อมูลของระบบร้านขายรองเท้าออนไลน์ประกอบด้วยตารางหลักดังนี้

1. **ตาราง User**: เก็บข้อมูลของผู้ใช้งานระบบ
   - id (Primary Key)
   - username
   - email
   - password_hash
   - profile_image
   - is_admin

2. **ตาราง ShoeCategory**: เก็บข้อมูลหมวดหมู่ของรองเท้า
   - id (Primary Key)
   - name
   - parent_id (Foreign Key ที่อ้างอิงกับ id ของตาราง ShoeCategory)

3. **ตาราง Shoe**: เก็บข้อมูลของรองเท้า
   - id (Primary Key)
   - name
   - price
   - description
   - image_url
   - stock
   - category
   - category_id (Foreign Key ที่อ้างอิงกับ id ของตาราง ShoeCategory)

4. **ตาราง ShoeSize**: เก็บข้อมูลขนาดของรองเท้า
   - id (Primary Key)
   - shoe_id (Foreign Key ที่อ้างอิงกับ id ของตาราง Shoe)
   - size
   - stock

5. **ตาราง CartItem**: เก็บข้อมูลสินค้าในตะกร้า
   - id (Primary Key)
   - user_id (Foreign Key ที่อ้างอิงกับ id ของตาราง User)
   - shoe_id (Foreign Key ที่อ้างอิงกับ id ของตาราง Shoe)
   - size
   - quantity

6. **ตาราง Order**: เก็บข้อมูลคำสั่งซื้อ
   - id (Primary Key)
   - user_id (Foreign Key ที่อ้างอิงกับ id ของตาราง User)
   - total_price
   - status
   - order_date
   - shipping_address
   - payment_method

7. **ตาราง OrderItem**: เก็บข้อมูลสินค้าในคำสั่งซื้อ
   - id (Primary Key)
   - order_id (Foreign Key ที่อ้างอิงกับ id ของตาราง Order)
   - shoe_id (Foreign Key ที่อ้างอิงกับ id ของตาราง Shoe)
   - size
   - quantity
   - price

8. **ตาราง Review**: เก็บข้อมูลรีวิวสินค้า
   - id (Primary Key)
   - shoe_id (Foreign Key ที่อ้างอิงกับ id ของตาราง Shoe)
   - user_id (Foreign Key ที่อ้างอิงกับ id ของตาราง User)
   - rating
   - comment
   - date

### 2.3.3 การออกแบบส่วนติดต่อผู้ใช้

การออกแบบส่วนติดต่อผู้ใช้ของระบบร้านขายรองเท้าออนไลน์มุ่งเน้นความเรียบง่าย ใช้งานง่าย และเป็นมิตรกับผู้ใช้ โดยใช้ Bootstrap เป็นเฟรมเวิร์คหลักในการพัฒนาส่วนติดต่อผู้ใช้ ซึ่งช่วยให้เว็บไซต์รองรับการใช้งานบนอุปกรณ์ที่หลากหลาย (Responsive Design)

ส่วนติดต่อผู้ใช้หลักของระบบประกอบด้วย

1. **หน้าหลัก (Home Page)**: แสดงสินค้าแนะนำและหมวดหมู่สินค้า
2. **หน้ารายการสินค้า (Product List Page)**: แสดงรายการสินค้าทั้งหมดหรือตามหมวดหมู่
3. **หน้ารายละเอียดสินค้า (Product Detail Page)**: แสดงรายละเอียดของสินค้าและรีวิวจากผู้ใช้
4. **หน้าตะกร้าสินค้า (Cart Page)**: แสดงรายการสินค้าในตะกร้าและราคารวม
5. **หน้าชำระเงิน (Checkout Page)**: ให้ผู้ใช้กรอกข้อมูลการจัดส่งและเลือกวิธีการชำระเงิน
6. **หน้าประวัติการสั่งซื้อ (Order History Page)**: แสดงประวัติการสั่งซื้อของผู้ใช้
7. **หน้าโปรไฟล์ (Profile Page)**: ให้ผู้ใช้แก้ไขข้อมูลส่วนตัว
8. **หน้าจัดการสินค้า (Admin Product Management Page)**: ให้ผู้ดูแลระบบจัดการสินค้า
9. **หน้าจัดการคำสั่งซื้อ (Admin Order Management Page)**: ให้ผู้ดูแลระบบจัดการคำสั่งซื้อ

## 2.4 แผนภาพแสดงความสัมพันธ์ของระบบ

### 2.4.1 แผนภาพ Use Case Diagram

แผนภาพ Use Case Diagram แสดงความสัมพันธ์ระหว่างผู้ใช้งานกับฟังก์ชันการทำงานของระบบ โดยมีผู้ใช้งานหลัก 2 ประเภท ได้แก่ ผู้ใช้งานทั่วไป (User) และผู้ดูแลระบบ (Admin)

### 2.4.2 แผนภาพ Entity-Relationship Diagram (ERD)

แผนภาพ Entity-Relationship Diagram (ERD) แสดงความสัมพันธ์ระหว่างเอนทิตีต่างๆ ในฐานข้อมูลของระบบ

### 2.4.3 แผนภาพ Sequence Diagram

แผนภาพ Sequence Diagram แสดงลำดับการทำงานของระบบในฟังก์ชันการทำงานต่างๆ เช่น การสั่งซื้อสินค้า การชำระเงิน เป็นต้น

## 2.5 เครื่องมือที่ใช้ในการพัฒนาระบบ

### 2.5.1 ภาษาโปรแกรมและเฟรมเวิร์ค

- **ภาษาโปรแกรม**: Python
- **เฟรมเวิร์ค**: Flask
- **ฐานข้อมูล**: SQLite
- **ORM**: SQLAlchemy
- **Frontend**: HTML, CSS, JavaScript, Bootstrap
- **การรักษาความปลอดภัย**: Werkzeug

### 2.5.2 เครื่องมือที่ใช้ในการพัฒนา

- **IDE**: Visual Studio Code
- **Version Control**: Git
- **การจัดการโปรเจค**: GitHub
- **การทดสอบ**: Flask Testing
- **การจัดการฐานข้อมูล**: DB Browser for SQLite 