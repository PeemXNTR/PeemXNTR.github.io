# บทที่ 4
# การทดสอบระบบ

## 4.1 แผนการทดสอบระบบ

การทดสอบระบบร้านขายรองเท้าออนไลน์มีวัตถุประสงค์เพื่อตรวจสอบว่าระบบสามารถทำงานได้ตามความต้องการที่กำหนดไว้หรือไม่ โดยมีแผนการทดสอบดังนี้

### 4.1.1 ประเภทของการทดสอบ

1. **การทดสอบหน่วย (Unit Testing)**: ทดสอบการทำงานของแต่ละฟังก์ชันหรือโมดูลย่อยของระบบ
2. **การทดสอบการทำงานร่วมกัน (Integration Testing)**: ทดสอบการทำงานร่วมกันของโมดูลต่างๆ ในระบบ
3. **การทดสอบระบบ (System Testing)**: ทดสอบการทำงานของระบบทั้งหมด
4. **การทดสอบการยอมรับ (Acceptance Testing)**: ทดสอบว่าระบบสามารถตอบสนองความต้องการของผู้ใช้งานได้หรือไม่

### 4.1.2 สภาพแวดล้อมในการทดสอบ

การทดสอบระบบร้านขายรองเท้าออนไลน์ใช้สภาพแวดล้อมในการทดสอบดังนี้

1. **ฮาร์ดแวร์**:
   - คอมพิวเตอร์ส่วนบุคคล (PC) หรือโน้ตบุ๊ก
   - หน่วยประมวลผล: Intel Core i5 หรือสูงกว่า
   - หน่วยความจำ (RAM): 8 GB หรือสูงกว่า
   - พื้นที่จัดเก็บข้อมูล: 256 GB หรือสูงกว่า

2. **ซอฟต์แวร์**:
   - ระบบปฏิบัติการ: Windows 10, macOS, หรือ Linux
   - เว็บเบราว์เซอร์: Google Chrome, Mozilla Firefox, Microsoft Edge, Safari
   - เครื่องมือทดสอบ: Flask Testing, Selenium, PyTest

### 4.1.3 ผู้ทดสอบระบบ

ผู้ทดสอบระบบแบ่งออกเป็น 3 กลุ่ม ได้แก่

1. **ผู้พัฒนาระบบ**: ทดสอบการทำงานของระบบในระหว่างการพัฒนา
2. **ผู้ทดสอบระบบ**: ทดสอบการทำงานของระบบตามแผนการทดสอบ
3. **ผู้ใช้งานระบบ**: ทดสอบการใช้งานระบบในสถานการณ์จริง

## 4.2 การทดสอบหน่วย (Unit Testing)

การทดสอบหน่วยเป็นการทดสอบการทำงานของแต่ละฟังก์ชันหรือโมดูลย่อยของระบบ โดยใช้ PyTest เป็นเครื่องมือในการทดสอบ

### 4.2.1 การทดสอบโมเดล

```python
# ตัวอย่างการทดสอบโมเดล User
def test_user_model():
    # สร้างผู้ใช้ใหม่
    user = User(username='testuser', email='test@example.com', password_hash='password_hash')
    
    # ตรวจสอบว่าผู้ใช้มีข้อมูลตามที่กำหนดหรือไม่
    assert user.username == 'testuser'
    assert user.email == 'test@example.com'
    assert user.password_hash == 'password_hash'
    assert user.is_admin == False

# ตัวอย่างการทดสอบโมเดล Shoe
def test_shoe_model():
    # สร้างสินค้าใหม่
    shoe = Shoe(name='Test Shoe', price=100.0, description='Test Description')
    
    # ตรวจสอบว่าสินค้ามีข้อมูลตามที่กำหนดหรือไม่
    assert shoe.name == 'Test Shoe'
    assert shoe.price == 100.0
    assert shoe.description == 'Test Description'
    assert shoe.stock == 0
```

### 4.2.2 การทดสอบฟังก์ชัน

```python
# ตัวอย่างการทดสอบฟังก์ชันลงทะเบียน
def test_register():
    # สร้างข้อมูลสำหรับการลงทะเบียน
    data = {
        'username': 'testuser',
        'email': 'test@example.com',
        'password': 'password'
    }
    
    # ส่งคำขอลงทะเบียน
    response = client.post('/register', data=data, follow_redirects=True)
    
    # ตรวจสอบว่าการลงทะเบียนสำเร็จหรือไม่
    assert response.status_code == 200
    assert b'ลงทะเบียนสำเร็จ กรุณาเข้าสู่ระบบ' in response.data

# ตัวอย่างการทดสอบฟังก์ชันเข้าสู่ระบบ
def test_login():
    # สร้างข้อมูลสำหรับการเข้าสู่ระบบ
    data = {
        'username': 'testuser',
        'password': 'password'
    }
    
    # ส่งคำขอเข้าสู่ระบบ
    response = client.post('/login', data=data, follow_redirects=True)
    
    # ตรวจสอบว่าการเข้าสู่ระบบสำเร็จหรือไม่
    assert response.status_code == 200
    assert b'เข้าสู่ระบบสำเร็จ' in response.data
```

## 4.3 การทดสอบการทำงานร่วมกัน (Integration Testing)

การทดสอบการทำงานร่วมกันเป็นการทดสอบการทำงานร่วมกันของโมดูลต่างๆ ในระบบ โดยมีการทดสอบดังนี้

### 4.3.1 การทดสอบการทำงานร่วมกันของระบบสมาชิกและระบบตะกร้าสินค้า

```python
# ตัวอย่างการทดสอบการเพิ่มสินค้าลงในตะกร้าหลังจากเข้าสู่ระบบ
def test_add_to_cart_after_login():
    # เข้าสู่ระบบ
    login_data = {
        'username': 'testuser',
        'password': 'password'
    }
    client.post('/login', data=login_data)
    
    # เพิ่มสินค้าลงในตะกร้า
    cart_data = {
        'size': '42',
        'quantity': '1'
    }
    response = client.post('/add_to_cart/1', data=cart_data, follow_redirects=True)
    
    # ตรวจสอบว่าการเพิ่มสินค้าลงในตะกร้าสำเร็จหรือไม่
    assert response.status_code == 200
    assert b'เพิ่มสินค้าลงในตะกร้าสำเร็จ' in response.data
```

### 4.3.2 การทดสอบการทำงานร่วมกันของระบบตะกร้าสินค้าและระบบชำระเงิน

```python
# ตัวอย่างการทดสอบการชำระเงินหลังจากเพิ่มสินค้าลงในตะกร้า
def test_checkout_after_add_to_cart():
    # เข้าสู่ระบบ
    login_data = {
        'username': 'testuser',
        'password': 'password'
    }
    client.post('/login', data=login_data)
    
    # เพิ่มสินค้าลงในตะกร้า
    cart_data = {
        'size': '42',
        'quantity': '1'
    }
    client.post('/add_to_cart/1', data=cart_data)
    
    # ชำระเงิน
    checkout_data = {
        'shipping_address': 'Test Address',
        'payment_method': 'credit_card'
    }
    response = client.post('/checkout', data=checkout_data, follow_redirects=True)
    
    # ตรวจสอบว่าการชำระเงินสำเร็จหรือไม่
    assert response.status_code == 200
    assert b'สั่งซื้อสำเร็จ' in response.data
```

## 4.4 การทดสอบระบบ (System Testing)

การทดสอบระบบเป็นการทดสอบการทำงานของระบบทั้งหมด โดยมีการทดสอบดังนี้

### 4.4.1 การทดสอบฟังก์ชันการทำงานของระบบ (Functional Testing)

| ลำดับ | ฟังก์ชันการทำงาน | วิธีการทดสอบ | ผลลัพธ์ที่คาดหวัง | ผลการทดสอบ |
|------|----------------|------------|---------------|-----------|
| 1 | การลงทะเบียน | กรอกข้อมูลลงทะเบียนและกดปุ่ม "ลงทะเบียน" | ระบบแสดงข้อความ "ลงทะเบียนสำเร็จ กรุณาเข้าสู่ระบบ" | ผ่าน |
| 2 | การเข้าสู่ระบบ | กรอกชื่อผู้ใช้และรหัสผ่านและกดปุ่ม "เข้าสู่ระบบ" | ระบบแสดงข้อความ "เข้าสู่ระบบสำเร็จ" | ผ่าน |
| 3 | การค้นหาสินค้า | กรอกคำค้นหาและกดปุ่ม "ค้นหา" | ระบบแสดงรายการสินค้าที่ตรงกับคำค้นหา | ผ่าน |
| 4 | การเพิ่มสินค้าลงในตะกร้า | เลือกขนาดและจำนวนและกดปุ่ม "เพิ่มลงในตะกร้า" | ระบบแสดงข้อความ "เพิ่มสินค้าลงในตะกร้าสำเร็จ" | ผ่าน |
| 5 | การแก้ไขจำนวนสินค้าในตะกร้า | แก้ไขจำนวนสินค้าและกดปุ่ม "อัปเดต" | ระบบแสดงจำนวนสินค้าที่อัปเดตและราคารวมที่เปลี่ยนแปลง | ผ่าน |
| 6 | การลบสินค้าออกจากตะกร้า | กดปุ่ม "ลบ" | ระบบลบสินค้าออกจากตะกร้าและแสดงข้อความ "ลบสินค้าสำเร็จ" | ผ่าน |
| 7 | การชำระเงิน | กรอกข้อมูลการจัดส่งและเลือกวิธีการชำระเงินและกดปุ่ม "สั่งซื้อ" | ระบบแสดงข้อความ "สั่งซื้อสำเร็จ" | ผ่าน |
| 8 | การดูประวัติการสั่งซื้อ | คลิกที่เมนู "ประวัติการสั่งซื้อ" | ระบบแสดงรายการคำสั่งซื้อทั้งหมดของผู้ใช้ | ผ่าน |
| 9 | การให้คะแนนและรีวิวสินค้า | กรอกคะแนนและรีวิวและกดปุ่ม "ส่ง" | ระบบแสดงข้อความ "ส่งรีวิวสำเร็จ" | ผ่าน |
| 10 | การจัดการสินค้า (สำหรับผู้ดูแลระบบ) | เพิ่ม แก้ไข หรือลบสินค้า | ระบบแสดงข้อความยืนยันการดำเนินการ | ผ่าน |

### 4.4.2 การทดสอบประสิทธิภาพของระบบ (Performance Testing)

การทดสอบประสิทธิภาพของระบบเป็นการทดสอบความเร็วในการตอบสนองและความสามารถในการรองรับผู้ใช้งานพร้อมกันของระบบ โดยใช้เครื่องมือ Apache JMeter ในการทดสอบ

| ลำดับ | รายการทดสอบ | จำนวนผู้ใช้งานพร้อมกัน | เวลาตอบสนองเฉลี่ย (วินาที) | ผลการทดสอบ |
|------|------------|-------------------|------------------------|-----------|
| 1 | การเข้าถึงหน้าหลัก | 10 | 0.5 | ผ่าน |
| 2 | การค้นหาสินค้า | 10 | 0.8 | ผ่าน |
| 3 | การเพิ่มสินค้าลงในตะกร้า | 10 | 1.0 | ผ่าน |
| 4 | การชำระเงิน | 10 | 1.5 | ผ่าน |

### 4.4.3 การทดสอบความปลอดภัยของระบบ (Security Testing)

การทดสอบความปลอดภัยของระบบเป็นการทดสอบการป้องกันการโจมตีและการรักษาความปลอดภัยของข้อมูลในระบบ

| ลำดับ | รายการทดสอบ | วิธีการทดสอบ | ผลลัพธ์ที่คาดหวัง | ผลการทดสอบ |
|------|------------|------------|---------------|-----------|
| 1 | การป้องกัน SQL Injection | ทดลองใส่คำสั่ง SQL ในช่องกรอกข้อมูล | ระบบไม่ทำงานตามคำสั่ง SQL ที่ใส่เข้าไป | ผ่าน |
| 2 | การป้องกัน Cross-Site Scripting (XSS) | ทดลองใส่สคริปต์ JavaScript ในช่องกรอกข้อมูล | ระบบไม่ทำงานตามสคริปต์ที่ใส่เข้าไป | ผ่าน |
| 3 | การป้องกัน Cross-Site Request Forgery (CSRF) | ทดลองส่งคำขอโดยไม่มี CSRF token | ระบบปฏิเสธคำขอ | ผ่าน |
| 4 | การเข้ารหัสรหัสผ่าน | ตรวจสอบว่ารหัสผ่านถูกเก็บในรูปแบบที่เข้ารหัสแล้วหรือไม่ | รหัสผ่านถูกเก็บในรูปแบบที่เข้ารหัสแล้ว | ผ่าน |

## 4.5 การทดสอบการยอมรับ (Acceptance Testing)

การทดสอบการยอมรับเป็นการทดสอบว่าระบบสามารถตอบสนองความต้องการของผู้ใช้งานได้หรือไม่ โดยให้ผู้ใช้งานจริงทดลองใช้งานระบบและประเมินความพึงพอใจ

### 4.5.1 กลุ่มตัวอย่างในการทดสอบ

กลุ่มตัวอย่างในการทดสอบแบ่งออกเป็น 2 กลุ่ม ได้แก่

1. **กลุ่มผู้ซื้อ**: ผู้ที่สนใจซื้อรองเท้าออนไลน์ จำนวน 30 คน
2. **กลุ่มผู้ขาย**: ผู้ประกอบการร้านขายรองเท้า จำนวน 5 คน

### 4.5.2 วิธีการทดสอบ

1. ให้ผู้ใช้งานทดลองใช้งานระบบตามสถานการณ์ที่กำหนด เช่น การลงทะเบียน การค้นหาสินค้า การสั่งซื้อสินค้า เป็นต้น
2. ให้ผู้ใช้งานประเมินความพึงพอใจในการใช้งานระบบโดยใช้แบบสอบถาม

### 4.5.3 ผลการทดสอบ

ผลการทดสอบการยอมรับแสดงในรูปแบบของคะแนนความพึงพอใจเฉลี่ย โดยมีระดับคะแนนดังนี้
- 5 = พึงพอใจมากที่สุด
- 4 = พึงพอใจมาก
- 3 = พึงพอใจปานกลาง
- 2 = พึงพอใจน้อย
- 1 = พึงพอใจน้อยที่สุด

| ลำดับ | รายการประเมิน | คะแนนเฉลี่ย (กลุ่มผู้ซื้อ) | คะแนนเฉลี่ย (กลุ่มผู้ขาย) |
|------|-------------|------------------------|------------------------|
| 1 | ความง่ายในการใช้งานระบบ | 4.2 | 4.0 |
| 2 | ความสวยงามของส่วนติดต่อผู้ใช้ | 4.0 | 3.8 |
| 3 | ความรวดเร็วในการตอบสนอง | 3.8 | 3.6 |
| 4 | ความครบถ้วนของฟังก์ชันการทำงาน | 4.3 | 4.2 |
| 5 | ความปลอดภัยของระบบ | 4.1 | 4.0 |
| 6 | ความพึงพอใจโดยรวม | 4.2 | 4.0 |

## 4.6 ปัญหาที่พบและการแก้ไข

ในระหว่างการทดสอบระบบ พบปัญหาและได้ดำเนินการแก้ไขดังนี้

| ลำดับ | ปัญหาที่พบ | การแก้ไข |
|------|----------|---------|
| 1 | การแสดงผลไม่ถูกต้องบนอุปกรณ์มือถือ | ปรับปรุง CSS และใช้ Bootstrap Responsive Design |
| 2 | การค้นหาสินค้าใช้เวลานานเกินไป | ปรับปรุงการสร้างดัชนีในฐานข้อมูล |
| 3 | การอัปโหลดรูปภาพขนาดใหญ่ทำให้ระบบทำงานช้า | จำกัดขนาดของไฟล์รูปภาพและบีบอัดรูปภาพก่อนบันทึก |
| 4 | ผู้ใช้สับสนในขั้นตอนการชำระเงิน | ปรับปรุงส่วนติดต่อผู้ใช้และเพิ่มคำอธิบายในแต่ละขั้นตอน |

## 4.7 สรุปผลการทดสอบระบบ

จากการทดสอบระบบร้านขายรองเท้าออนไลน์ สามารถสรุปผลได้ดังนี้

1. **การทดสอบหน่วย (Unit Testing)**: ทุกฟังก์ชันและโมดูลย่อยของระบบสามารถทำงานได้ตามที่ออกแบบไว้
2. **การทดสอบการทำงานร่วมกัน (Integration Testing)**: โมดูลต่างๆ ในระบบสามารถทำงานร่วมกันได้อย่างถูกต้อง
3. **การทดสอบระบบ (System Testing)**: ระบบสามารถทำงานได้ตามความต้องการที่กำหนดไว้ มีประสิทธิภาพและความปลอดภัยที่เหมาะสม
4. **การทดสอบการยอมรับ (Acceptance Testing)**: ผู้ใช้งานมีความพึงพอใจในการใช้งานระบบในระดับดี

โดยสรุป ระบบร้านขายรองเท้าออนไลน์สามารถทำงานได้ตามความต้องการที่กำหนดไว้ และผู้ใช้งานมีความพึงพอใจในการใช้งานระบบ อย่างไรก็ตาม ยังมีบางส่วนที่ควรปรับปรุงเพื่อให้ระบบมีประสิทธิภาพและความเป็นมิตรกับผู้ใช้มากยิ่งขึ้น
</rewritten_file> 